<script type="text/javascript">
    RED.nodes.registerType('getRole', {
        category: 'Communication',
        color: '#5662F6',
        icon: 'DiscordLogo.png',
        defaults: {
            name: {value: ''},
            connection: {value: "", type:"DiscordConnection"},
            userId: {value: ''},
            guildId: {value: ''}
        },

        inputs: 1,
        outputs: 1,
        label: function () {
            return this.name || 'getRole'
        }
    })
</script>

<script type='text/html' data-template-name='getRole'>
    <div class='form-row'>
        <label for='node-input-name'><i class='fa fa-tag'></i> Name</label>
        <input type='text' id='node-input-name'>
    </div>
    <div class="form-row">
        <label for="node-input-connection"><i class="fa fa-server"></i> Connection</label>
        <input id="node-input-connection">
    </div>
    <div class='form-row'>
        <label for='node-input-userId'><i class='fa fa-user'></i> User id</label>
        <input type='text' id='node-input-userId'>
    </div>
    <div class='form-row'>
        <label for='node-input-guildId'><i class='fa fa-users'></i> Guild id</label>
        <input type='text' id='node-input-guildId'>
    </div>
</script>

<script type='text/html' data-help-name='getRole'>
    <p>This node gets all the roles of the specified user on the specified guild(server)</p>

    <h3>Inputs</h3>
    <dl class='message-properties'>
        <dt>msg.userId
            <span class='property-type'>string</span>
        </dt>
        <dd>The userId of the user to get the roles of</dd>

        <dt><code>msg.guilId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>The guild id where the user recides.</dd>

        <dt class='optional'><code>msg.discord.userId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Alternative properties - The userId of the user to get the roles of</dd>

        <dt class='optional'><code>msg.discord.guildId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Alternative properties - The guild id where the user recides.</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class='message-properties'>
        <dt>payload
            <span class='property-type'>Array</span>
        </dt>
        <dd>Outputs an array of roles</dd>

        <dt><code>msg.discord</code>
            <span class='property-type'>object</span>
        </dt>
        <dd>
            An object which contains roles, userId & guildId
        </dd>

    </dl>

    <h3>Details</h3>
    <p>This node will try to get the roles of the specified user in the specified guild. To be able to fetch the roles, the node needs both an userId and an serverId. The node will look for these properties in this order:</p>
    <dl>
        <dt>1. msguserId & msg.guilId</dt>
        <dt>2. node-properties</dt>
        <dd>If you specify the properties in the nodes config</dd>
        <dt>3. <code>msg.discord</code></dt>
        <dd>msg.discord.userId & msg.discord.serverId</dd>
    </dl>
</script>